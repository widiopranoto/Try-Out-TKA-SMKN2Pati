<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMK N 2 Pati - Konfirmasi Tes</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }
        .header { background-color: #004d40; color: white; padding: 15px; text-align: center; }
        .card { background-color: white; margin: 30px auto; padding: 25px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); max-width: 500px; }
        .card h2 { color: #004d40; margin-top: 0; text-align: center; }
        
        /* Gaya untuk semua baris data */
        .data-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        .data-row:last-child { border-bottom: none; } /* Hilangkan garis bawah pada baris terakhir */
        .data-label { font-weight: bold; color: #333; }
        .data-value { text-align: right; }
        .data-value.important { font-weight: bold; }
        .data-value.success { color: #00796b; font-weight: bold; font-size: 1.1em; }
        
        button { width: 100%; padding: 12px; background-color: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 30px; font-weight: bold; font-size: 1.1em; }
        button:hover { background-color: #b71c1c; }
        .warning { background-color: #fff3e0; border: 1px solid #ffb74d; padding: 15px; border-radius: 4px; margin-top: 20px; text-align: center; }
    </style>
</head>
<body>

<div class="header">
    <h1>SMK Negeri 2 Pati</h1>
    <h2>Try Out TKA</h2>
</div>

<div class="card">
    <h2>Konfirmasi Tes</h2>
    
    <div id="tesDetails">
        </div>
    
    <div class="warning">
        **Perhatian!** Klik **Mulai Tes** hanya jika Anda sudah siap. Waktu akan segera dihitung mundur setelah Anda memulai.
    </div>

    <button id="mulaiBtn">Mulai Tes</button>
</div>

<script>
    const nisn = localStorage.getItem('nisn');
    const nama = localStorage.getItem('nama');
    const mapelCode = localStorage.getItem('mapel');

    // Cek ketersediaan data
    if (!nisn || !nama || !mapelCode) {
        alert("Data peserta tidak lengkap. Harap ulangi dari awal.");
        window.location.href = 'index.html';
    }
    
    const mapelNames = {
        'bindo': 'Bahasa Indonesia',
        'mat': 'Matematika',
        'bing': 'Bahasa Inggris',
        'pkku': 'PKKU',
        'jepang': 'Bahasa Jepang'
    };

    function determineTime(code) {
        // Logika penentuan waktu dalam menit
        const name = mapelNames[code] || code;
        
        if (name.includes('Matematika')) {
            return 50; // 50 menit
        } else if (name.includes('Bahasa Indonesia') || name.includes('Bahasa Inggris')) {
            return 45; // 45 menit
        } else {
            return 60; // Default 60 menit
        }
    }

    function displayConfirmation() {
        const mapelName = mapelNames[mapelCode] || mapelCode.toUpperCase();
        const allocatedTime = determineTime(mapelCode);
        
        // Simpan alokasi waktu (dalam menit) ke Local Storage
        localStorage.setItem('waktu', allocatedTime);

        const html = `
            <div class="data-row">
                <span class="data-label">NISN:</span>
                <span class="data-value important">${nisn}</span>
            </div>
            <div class="data-row">
                <span class="data-label">Nama Peserta:</span>
                <span class="data-value important">${nama}</span>
            </div>
            <div class="data-row">
                <span class="data-label">Nama Tes:</span>
                <span class="data-value">Try Out TKA ${mapelName}</span>
            </div>
            <div class="data-row">
                <span class="data-label">Status Tes:</span>
                <span class="data-value success">Siap</span>
            </div>
            <div class="data-row">
                <span class="data-label">Alokasi Waktu Tes:</span>
                <span class="data-value success">${allocatedTime} menit</span>
            </div>
        `;
        document.getElementById('tesDetails').innerHTML = html;
    }

    document.getElementById('mulaiBtn').addEventListener('click', function() {
        // Lanjut ke halaman try_out.html
        window.location.href = 'try_out.html';
    });

    displayConfirmation();
</script>

</body>
</html>